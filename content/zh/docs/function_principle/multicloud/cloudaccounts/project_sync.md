---
title: "资源项目同步"
weight: 2
description: >
    描述资源同步时项目归属问题
---

## 基础概念

- 云上项目: 指的是本地项目和云上项目的映射关系
- 同步策略: 指专用于云上资源同步到本地时资源归属的描述

## 云上同步云下资源归属说明

- 云账号未关联同步策略时:
    1. 在本地创建的资源或者更改过项目的资源将不会再同步资源时更改项目归属
    2. 根据云上项目的映射表找到云上到本地的映射关系更改资源的项目归属
    3. 若未找到云上项目的映射关系则资源归属到云订阅所在的项目
- 云账号关联同步策略时:
    1. 在本地新建资源或者更改过项目的资源也将会根据同步策略更改资源的归属
    2. 优先使用同步策略中的设置, 若未匹配则按照云账号未关联同步策略时的2和3进行归属

## 本地到云上的项目同步

假设云上项目映射关系如下列表, 且云上项目皆正常可用

| 云上项目 | 优先级 | 本地项目 |
|----------|--------|----------
| cloud-A  | 0      | local-A  |
| cloud-B  | 3      | local-B  |
| cloud-C  | 2      | local-B  |
| cloud-D  | 0      | local-C  |

- 若创建资源时使用了local-A项目, 根据映射表, local-A映射至云上cloud-A项目, 创建资源将归属于云上cloud-A项目
- 若创建资源时使用了local-B项目, 根据映射表, cloud-B cloud-C 都可以选择，但cloud-B优先级最高, 创建资源将归属于云上cloud-B项目
- 若创建资源时使用了local-D项目，未在映射表中找到映射关系，则在云上创建同名的local-D项目，创建的资源将归属于云上的local-D项目

## 项目自动重命名

v3.11版本开始支持此功能, 云上更改名称后,本地项目同时变更名称, 且云上项目删除后, 本地项目会跟随删除(资源不会直接删除)

前提条件:
- 云账号开启自动创建项目
- 云账号未绑定同步策略
- region服务开启自动重名功能(默认关闭)
- 本地项目仅仅映射到某一个云账号的某一个云上项目

region服务开关自动重命名方法:
```shell
# 关闭自动重名
$ climc service-config region2 --config 'enable_auto_rename_project=false'
# 开启自动重命名
$ climc service-config region2 --config 'enable_auto_rename_project=true'
```
